<html>
<head>
  <title>urllib2 httplib HTTPConnection</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="786"/>
<h1>urllib2 httplib HTTPConnection</h1>

<div>
<span><div style="word-wrap: break-word; float: left; width: 220px; color: rgb(86, 86, 86); font-family: 宋体, Arial; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(243, 247, 249); text-decoration-style: initial; text-decoration-color: initial;"><div style="word-wrap: break-word; background: rgb(255, 255, 255); overflow: hidden; border: 1px solid rgb(194, 217, 232); padding-bottom: 10px;"><div style="word-wrap: break-word; text-align: center; margin: 16px auto 0px; padding-bottom: 15px; width: 200px; position: relative;"><a href="http://blog.chinaunix.net/uid/10915175.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);"><br/><img src="http://passport.ixpub.net/avatar.php?uid=10915175&amp;size=middle" style="word-wrap: break-word; border: 1px solid rgb(218, 218, 218); padding: 3px;"></img></a><p style="word-wrap: break-word; margin: 10px 0px 0px; padding: 0px;"><a href="http://blog.chinaunix.net/uid/10915175.html" style="word-wrap: break-word; text-decoration: none; color: black; font-weight: bold; font-size: 14px;">gray1982</a></p></div><ul style="word-wrap: break-word; margin: 15px auto 0px; padding: 0px; list-style: none; width: 200px; border: 0px;"><li>博客访问： 324680博文数量： 210博客积分： 0博客等级： 民兵技术积分： 2630用 户 组： 普通用户注册时间： 2016-07-01 13:46认证徽章：<img src="urllib2 httplib HTTPConnection_files/Image.png" type="image/png" data-filename="Image.png" style="word-wrap: break-word; border: 0px; vertical-align: middle;"/></li></ul></div><div style="word-wrap: break-word; background: rgb(255, 255, 255); overflow: hidden; border: 1px solid rgb(194, 217, 232); margin-top: 8px; padding-bottom: 10px;"><div style="word-wrap: break-word; background-image: url(&quot;/image/default/bg.png&quot;); background-repeat: no-repeat; background-position: 0px -154px; height: 25px; padding: 0px 10px; color: rgb(255, 255, 255); font-weight: bold;">个人简介</div><p style="word-wrap: break-word; margin: 4px auto; padding: 0px; width: 200px;">鸟在笼中，恨关羽不能张飞；Survival of the fittest</p></div><div style="word-wrap: break-word; background: rgb(255, 255, 255); overflow: hidden; border: 1px solid rgb(194, 217, 232); margin-top: 8px; padding-bottom: 10px;"><div style="word-wrap: break-word; background-image: url(&quot;/image/default/bg.png&quot;); background-repeat: no-repeat; background-position: 0px -154px; height: 25px; padding: 0px 10px; color: rgb(255, 255, 255); font-weight: bold;">文章分类</div><div style="word-wrap: break-word; width: 190px; margin: 8px auto;"><p style="word-wrap: break-word; margin: 15px 0px 12px; padding: 0px; width: 190px;"><a href="http://blog.chinaunix.net/uid/10915175/list/1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;">全部博文</a>（210）</p><ul style="word-wrap: break-word; margin: 0px; padding: 0px; list-style: none;"><li><a href="http://blog.chinaunix.net/uid/10915175/cid-213415-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="安全">安全</a>（1）<a href="http://blog.chinaunix.net/uid/10915175/cid-209785-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="运维平台框架--django">运维平台框架--dj</a>（12）<a href="http://blog.chinaunix.net/uid/10915175/cid-198480-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="Docker">Docker</a>（3）<a href="http://blog.chinaunix.net/uid/10915175/cid-193636-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="Salt自动化">Salt自动化</a>（9）<a href="http://blog.chinaunix.net/uid/10915175/cid-189772-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="大数据">大数据</a>（0）<a href="http://blog.chinaunix.net/uid/10915175/cid-183745-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="虚拟化">虚拟化</a>（13）<a href="http://blog.chinaunix.net/uid/10915175/cid-177244-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="Puppet">Puppet</a>（4）<a href="http://blog.chinaunix.net/uid/10915175/cid-166928-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="个人图书">个人图书</a>（10）<a href="http://blog.chinaunix.net/uid/10915175/cid-160551-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="windows">windows</a>（21）<a href="http://blog.chinaunix.net/uid/10915175/cid-158970-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="Nginx">Nginx</a>（4）<a href="http://blog.chinaunix.net/uid/10915175/cid-158625-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="Solaris">Solaris</a>（8）<a href="http://blog.chinaunix.net/uid/10915175/cid-158218-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="其他">其他</a>（9）<a href="http://blog.chinaunix.net/uid/10915175/cid-158216-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="负载高可用">负载高可用</a>（3）<a href="http://blog.chinaunix.net/uid/10915175/cid-158214-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="Shell">Shell</a>（4）<a href="http://blog.chinaunix.net/uid/10915175/cid-157263-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="Hadoop">Hadoop</a>（3）<a href="http://blog.chinaunix.net/uid/10915175/cid-157262-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="Mysql">Mysql</a>（3）<a href="http://blog.chinaunix.net/uid/10915175/cid-157261-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="Linux">Linux</a>（58）<a href="http://blog.chinaunix.net/uid/10915175/cid-157260-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="Python">Python</a>（7）<a href="http://blog.chinaunix.net/uid/10915175/cid-157259-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="视频课件">视频课件</a>（38）<a href="http://blog.chinaunix.net/uid/10915175/cid--1-list-1.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); font-weight: bold;" title="未分配的博文">未分配的博文</a>（0）</li></ul></div></div><div style="word-wrap: break-word; background: rgb(255, 255, 255); overflow: hidden; border: 1px solid rgb(194, 217, 232); margin-top: 8px; padding-bottom: 10px;"><div style="word-wrap: break-word; background-image: url(&quot;/image/default/bg.png&quot;); background-repeat: no-repeat; background-position: 0px -154px; height: 25px; padding: 0px 10px; color: rgb(255, 255, 255); font-weight: bold;">最近访客</div><ul style="word-wrap: break-word; margin: 0px auto; padding: 0px 0px 10px; list-style: none; width: 186px; overflow: hidden;"><li><a href="http://blog.chinaunix.net/uid/1813014.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);"><img src="http://passport.ixpub.net/avatar.php?uid=1813014&amp;size=small" style="word-wrap: break-word; border: 1px solid rgb(218, 218, 218); padding: 2px; width: 48px; height: 48px;"></img></a><a href="http://blog.chinaunix.net/uid/9620812.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);"><img src="http://passport.ixpub.net/avatar.php?uid=9620812&amp;size=small" style="word-wrap: break-word; border: 1px solid rgb(218, 218, 218); padding: 2px; width: 48px; height: 48px;"></img></a><a href="http://blog.chinaunix.net/uid/29787409.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);"><img src="http://passport.ixpub.net/avatar.php?uid=29787409&amp;size=small" style="word-wrap: break-word; border: 1px solid rgb(218, 218, 218); padding: 2px; width: 48px; height: 48px;"></img></a><a href="http://blog.chinaunix.net/uid/31462550.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);"><img src="http://passport.ixpub.net/avatar.php?uid=31462550&amp;size=small" style="word-wrap: break-word; border: 1px solid rgb(218, 218, 218); padding: 2px; width: 48px; height: 48px;"></img></a><a href="http://blog.chinaunix.net/uid/25719946.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);"><img src="http://passport.ixpub.net/avatar.php?uid=25719946&amp;size=small" style="word-wrap: break-word; border: 1px solid rgb(218, 218, 218); padding: 2px; width: 48px; height: 48px;"></img></a><a href="http://blog.chinaunix.net/uid/31467969.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);"><img src="http://passport.ixpub.net/avatar.php?uid=31467969&amp;size=small" style="word-wrap: break-word; border: 1px solid rgb(218, 218, 218); padding: 2px; width: 48px; height: 48px;"></img></a><a href="http://blog.chinaunix.net/uid/28391676.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);"><img src="http://passport.ixpub.net/avatar.php?uid=28391676&amp;size=small" style="word-wrap: break-word; border: 1px solid rgb(218, 218, 218); padding: 2px; width: 48px; height: 48px;"></img></a><a href="http://blog.chinaunix.net/uid/8288322.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);"><img src="http://passport.ixpub.net/avatar.php?uid=8288322&amp;size=small" style="word-wrap: break-word; border: 1px solid rgb(218, 218, 218); padding: 2px; width: 48px; height: 48px;"></img></a><a href="http://blog.chinaunix.net/uid/21361743.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);"><img src="http://passport.ixpub.net/avatar.php?uid=21361743&amp;size=small" style="word-wrap: break-word; border: 1px solid rgb(218, 218, 218); padding: 2px; width: 48px; height: 48px;"></img></a></li><li style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px; text-align: center;"><a href="http://blog.chinaunix.net/uid/1813014.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="smallfish">smallfis</a></li><li style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px; text-align: center;"><a href="http://blog.chinaunix.net/uid/9620812.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="thewayma">thewayma</a></li><li style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px; text-align: center;"><a href="http://blog.chinaunix.net/uid/29787409.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="sync_1521">sync_152</a></li><li style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px; text-align: center;"><a href="http://blog.chinaunix.net/uid/31462550.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="15001924179">15001924</a></li><li style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px; text-align: center;"><a href="http://blog.chinaunix.net/uid/25719946.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="aoerqileng">aoerqile</a></li><li style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px; text-align: center;"><a href="http://blog.chinaunix.net/uid/31467969.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="smile_a">smile_a</a></li><li style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px; text-align: center;"><a href="http://blog.chinaunix.net/uid/28391676.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="johny666">johny666</a></li><li style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px; text-align: center;"><a href="http://blog.chinaunix.net/uid/8288322.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="cq539">cq539</a></li><li style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px; text-align: center;"><a href="http://blog.chinaunix.net/uid/21361743.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="shouyu924">shouyu92</a></li></ul></div><div style="word-wrap: break-word; background: rgb(255, 255, 255); overflow: hidden; border: 1px solid rgb(194, 217, 232); margin-top: 8px; padding-bottom: 5px;"><div style="word-wrap: break-word; background-image: url(&quot;/image/default/bg.png&quot;); background-repeat: no-repeat; background-position: 0px -154px; height: 25px; padding: 0px 10px; color: rgb(255, 255, 255); font-weight: bold;">微信关注</div><div style="word-wrap: break-word;"><div style="word-wrap: break-word; float: left; margin-right: 5px;"><img src="urllib2 httplib HTTPConnection_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" height="90" style="word-wrap: break-word; border: 0px;" width="90"/></div><br style="word-wrap: break-word;"/><div style="word-wrap: break-word; margin-top: 10px;"><p style="word-wrap: break-word; margin: 0px; padding: 0px;">IT168企业级官微</p><p style="word-wrap: break-word; margin: 0px; padding: 0px;"><br style="word-wrap: break-word;"/><br style="word-wrap: break-word;"/>
微信号：IT168qiye</p></div></div><hr size="1" style="word-wrap: break-word; margin: 0px; padding: 0px; clear: both;"/><div style="word-wrap: break-word; clear: both;"><div style="word-wrap: break-word; float: left; margin-right: 5px;"><img src="urllib2 httplib HTTPConnection_files/Image [1].jpg" type="image/jpeg" data-filename="Image.jpg" height="90" style="word-wrap: break-word; border: 0px;" width="90"/></div><br style="word-wrap: break-word;"/><div style="word-wrap: break-word; margin-top: 10px;"><p style="word-wrap: break-word; margin: 0px; padding: 0px;">系统架构师大会</p><p style="word-wrap: break-word; margin: 0px; padding: 0px;"><br style="word-wrap: break-word;"/><br style="word-wrap: break-word;"/>
微信号：SACC2013</p></div></div></div><div style="word-wrap: break-word; background: rgb(255, 255, 255); overflow: hidden; border: 1px solid rgb(194, 217, 232); margin-top: 8px; padding-bottom: 10px;"><div style="word-wrap: break-word; background-image: url(&quot;/image/default/bg.png&quot;); background-repeat: no-repeat; background-position: 0px -154px; height: 25px; padding: 0px 10px; color: rgb(255, 255, 255); font-weight: bold;">订阅</div><ul style="word-wrap: break-word; margin: 15px auto 0px; padding: 0px; list-style: none; width: 186px;"><li><a href="http://blog.chinaunix.net/blog/rss/uid/10915175.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); background-image: url(&quot;/image/default/bg.png&quot;); background-repeat: no-repeat; background-position: -77px -94px; width: 60px; height: 23px; display: block;"></a><a href="http://www.google.com/ig/add?feedurl=http%3A%2F%2Fblog.chinaunix.net%2Fuid%2F10915175.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86); background-image: url(&quot;/image/default/bg.png&quot;); background-repeat: no-repeat; background-position: -46px -73px; width: 103px; height: 16px; display: block;"></a></li></ul></div><div style="word-wrap: break-word; background: rgb(255, 255, 255); overflow: hidden; border: 1px solid rgb(194, 217, 232); margin-top: 8px; padding-bottom: 5px;"><div style="word-wrap: break-word; background-image: url(&quot;/image/default/bg.png&quot;); background-repeat: no-repeat; background-position: 0px -154px; height: 25px; padding: 0px 10px; color: rgb(255, 255, 255); font-weight: bold;">推荐博文</div><ul style="word-wrap: break-word; margin: 10px auto 0px; padding: 0px; list-style: none; width: 206px;"><li>·<a href="http://blog.chinaunix.net/uid-30044407-id-5766699.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="Python 中 import 的机制与实现">Python 中 import 的机制与实...</a>·<a href="http://blog.chinaunix.net/uid-30044407-id-5766697.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="MicroPython实现分析与移植">MicroPython实现分析与移植...</a>·<a href="http://blog.chinaunix.net/uid-30041905-id-5766686.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="经典makefile例子">经典makefile例子</a>·<a href="http://blog.chinaunix.net/uid-77311-id-5766680.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="mariadb galera集群如何启动第一个节点">mariadb galera集群如何启动...</a>·<a href="http://blog.chinaunix.net/uid-20788636-id-5766651.html" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" title="docker的overlay网络---Docker native overlay network">docker的overlay网络---Docke...</a></li></ul></div><div style="word-wrap: break-word; background: rgb(255, 255, 255); overflow: hidden; border: 1px solid rgb(194, 217, 232); margin-top: 8px; padding-bottom: 5px;"><div style="word-wrap: break-word; background-image: url(&quot;/image/default/bg.png&quot;); background-repeat: no-repeat; background-position: 0px -154px; height: 25px; padding: 0px 10px; color: rgb(255, 255, 255); font-weight: bold;">热词专题</div><ul style="word-wrap: break-word; margin: 10px auto 0px; padding: 0px; list-style: none; width: 206px;"><li>·<a href="http://blog.chinaunix.net/zt/1000/linux_1000000.shtml" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" target="blank" title="lua编译(linux)">lua编译(linux)</a></li></ul></div><div style="word-wrap: break-word; background: rgb(255, 255, 255); overflow: hidden; border: 1px solid rgb(194, 217, 232); margin-top: 8px; padding-bottom: 5px;"><div style="word-wrap: break-word; background-image: url(&quot;/image/default/bg.png&quot;); background-repeat: no-repeat; background-position: 0px -154px; height: 25px; padding: 0px 10px; color: rgb(255, 255, 255); font-weight: bold;">友情链接</div><ul style="word-wrap: break-word; margin: 10px auto 0px; padding: 0px; list-style: none; width: 206px;"><li>·<a href="http://www.idoxin.com/" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" target="blank" title="个人新博客">个人新博客</a>·<a href="http://www.keyppt.cn/" style="word-wrap: break-word; text-decoration: none; color: rgb(86, 86, 86);" target="blank" title="PPT模板">PPT模板</a></li></ul></div></div><div style="word-wrap: break-word; margin: 0px 0px 0px 230px; color: rgb(86, 86, 86); font-family: 宋体, Arial; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(243, 247, 249); text-decoration-style: initial; text-decoration-color: initial;"><div style="word-wrap: break-word; border: 1px solid rgb(194, 217, 232); background: rgb(255, 255, 255); padding: 20px 0px 17px; margin-bottom: 10px;"><div style="word-wrap: break-word; width: 1594.55px; margin: 0px auto; position: relative;"><div style="word-wrap: break-word; border-bottom: 0px; padding: 0px 0px 11px;"> <a href="http://blog.chinaunix.net/uid-10915175-id-3245399.html" style="word-wrap: break-word; text-decoration: none; color: rgb(25, 89, 155); font-family: 微软雅黑, 黑体, Verdana; font-size: 20px;">urllib2 httplib HTTPConnection</a> <em style="word-wrap: break-word; font-style: normal; margin-left: 22px; color: rgb(187, 186, 186); font-family: Arial;">2012-06-16 11:26:11</em></div><div style="word-wrap: break-word; color: rgb(102, 102, 102);"><div style="word-wrap: break-word; margin-top: 10px;"><p style="word-wrap: break-word; margin: 0px; padding: 0px; color: rgb(25, 89, 155);">分类： <span style="word-wrap: break-word; color: rgb(187, 186, 186); margin-right: 25px;">Python/Ruby</span></p><p style="word-wrap: break-word; margin: 0px; padding: 0px; color: rgb(25, 89, 155);"></p></div><div style="word-wrap: break-word; font-size: 16px;"><span style="word-wrap: break-word; font-size: 12px; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="word-wrap: break-word;">httplib实现了HTTP和HTTPS的客户端协议，一般不直接使用，在python更高层的封装模块中（urllib,urllib2）使用了它的http实现。</span></span><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><strong style="word-wrap: break-word; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">import</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;"> httplib<br style="word-wrap: break-word;"/>
conn </span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">=</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;"> httplib.HTTPConnection(</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">&quot;</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">google.com</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">&quot;</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">)<br style="word-wrap: break-word;"/>
conn.request(</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">'</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">get</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">'</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">, </span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">'</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">/</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">'</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">)<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;">print</span><span style="word-wrap: break-word; font-family: &quot;Courier new&quot;;"> conn.getresponse().read()<br style="word-wrap: break-word;"/>
conn.close()</span></strong></div><div style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px;"><span style="word-wrap: break-word; padding-right: 5px;"><a href="http://www.cnblogs.com/morya/archive/2011/05/12/2044904.html" style="word-wrap: break-word; text-decoration: none; color: rgb(99, 64, 27);" target="_blank">复制代码</a></span></div></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><span style="word-wrap: break-word;">httplib.HTTPConnection ( host [ , port [ , strict [ , timeout ]]] )</span></div></div><p style="word-wrap: break-word; margin: 5px auto; padding: 5px 0px 0px; font-family: 宋体, Arial; background-color: rgb(255, 252, 243);">       HTTPConnection类的构造函数，表示一次与服务器之间的交互，即请求/响应。参数host表示服务器主机，如：<a href="http://www.csdn.net/" style="word-wrap: break-word; text-decoration: none; color: rgb(99, 64, 27);" target="_blank">http://www.csdn.net/</a>；port为端口号，默认值为80；参数strict的 默认值为false， 表示在无法解析服务器返回的状态行时( status line) （比较典型的状态行如： HTTP/1.0 200 OK ），是否抛BadStatusLine 异常；可选参数timeout 表示超时时间。<br style="word-wrap: break-word;"/>
HTTPConnection提供的方法：</p><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><span style="word-wrap: break-word;">HTTPConnection.request ( method , url [ , body [ , headers ]] )</span></div></div><p style="word-wrap: break-word; margin: 5px auto; padding: 5px 0px 0px; font-family: 宋体, Arial; background-color: rgb(255, 252, 243);">调用request 方法会向服务器发送一次请求，method 表示请求的方法，常用有方法有get 和post ；url 表示请求的资源的url ；body 表示提交到服务器的数据，必须是字符串（如果method 是”post” ，则可以把body 理解为html 表单中的数据）；headers 表示请求的http 头。<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">HTTPConnection.getresponse ()</strong><br style="word-wrap: break-word;"/>
获取Http 响应。返回的对象是HTTPResponse 的实例，关于HTTPResponse 在下面 会讲解。<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">HTTPConnection.connect ()</strong><br style="word-wrap: break-word;"/>
连接到Http 服务器。<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">HTTPConnection.close ()</strong><br style="word-wrap: break-word;"/>
关闭与服务器的连接。<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">HTTPConnection.set_debuglevel ( level )</strong><br style="word-wrap: break-word;"/>
设置高度的级别。参数level 的默认值为0 ，表示不输出任何调试信息。<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">httplib.HTTPResponse</strong><br style="word-wrap: break-word;"/>
HTTPResponse表示服务器对客户端请求的响应。往往通过调用HTTPConnection.getresponse()来创建，它有如下方法和属性：<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">HTTPResponse.read([amt])</strong><br style="word-wrap: break-word;"/>
获取响应的消息体。如果请求的是一个普通的网页，那么该方法返回的是页面的html。可选参数amt表示从响应流中读取指定字节的数据。<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">HTTPResponse.getheader(name[, default])</strong><br style="word-wrap: break-word;"/>
获取响应头。Name表示头域(header field)名，可选参数default在头域名不存在的情况下作为默认值返回。<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">HTTPResponse.getheaders()</strong><br style="word-wrap: break-word;"/>
以列表的形式返回所有的头信息。<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">HTTPResponse.msg</strong><br style="word-wrap: break-word;"/>
获取所有的响应头信息。<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">HTTPResponse.version</strong><br style="word-wrap: break-word;"/>
获取服务器所使用的http协议版本。11表示http/1.1；10表示http/1.0。<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">HTTPResponse.status</strong><br style="word-wrap: break-word;"/>
获取响应的状态码。如：200表示请求成功。<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">HTTPResponse.reason</strong><br style="word-wrap: break-word;"/>
返回服务器处理请求的结果说明。一般为”OK”<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">下面通过一个例子来熟悉HTTPResponse中的方法：</strong></p><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><span style="word-wrap: break-word;">import</span> <span style="word-wrap: break-word;">httplib<br style="word-wrap: break-word;"/>
conn</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">httplib.HTTPConnection(</span><span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">www.g.com</span><span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">,</span> <span style="word-wrap: break-word;">80</span><span style="word-wrap: break-word;">, False)<br style="word-wrap: break-word;"/>
conn.request(</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">get</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">,</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">/</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">, headers</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">{</span><span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">Host</span><span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">:</span> <span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">www.google.com</span><span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">,<br style="word-wrap: break-word;"/>
                                    </span><span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">User-Agent</span><span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">:</span> <span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.1) Gecko/20090624 Firefox/3.5</span><span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">,<br style="word-wrap: break-word;"/>
                                    </span><span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">Accept</span><span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">:</span> <span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">text/plain</span><span style="word-wrap: break-word;">&quot;</span><span style="word-wrap: break-word;">})<br style="word-wrap: break-word;"/>
res</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">conn.getresponse()<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">print</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">version:</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">, res.version<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">print</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">reason:</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">, res.reason<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">print</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">status:</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">, res.status<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">print</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">msg:</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">, res.msg<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">print</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">headers:</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">, res.getheaders()<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">#</span><span style="word-wrap: break-word;">html</span><span style="word-wrap: break-word;"><br style="word-wrap: break-word;"/>
#</span><span style="word-wrap: break-word;">print '\n' + '-' * 50 + '\n'</span><span style="word-wrap: break-word;"><br style="word-wrap: break-word;"/>
#</span><span style="word-wrap: break-word;">print res.read()</span><span style="word-wrap: break-word;"><br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">conn.close()<br style="word-wrap: break-word;"/></span></div><div style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px;"><span style="word-wrap: break-word; padding-right: 5px;"><a href="http://www.cnblogs.com/morya/archive/2011/05/12/2044904.html" style="word-wrap: break-word; text-decoration: none; color: rgb(99, 64, 27);" target="_blank">复制代码</a></span></div></div><p style="word-wrap: break-word; margin: 5px auto; padding: 5px 0px 0px; font-family: 宋体, Arial; background-color: rgb(255, 252, 243);">Httplib模块中还定义了许多常量，如：<br style="word-wrap: break-word;"/>
Httplib. HTTP_PORT 的值为80，表示默认的端口号为80；<br style="word-wrap: break-word;"/>
Httplib.OK 的值为200，表示请求成功返回；<br style="word-wrap: break-word;"/>
Httplib. NOT_FOUND 的值为404，表示请求的资源不存在；<br style="word-wrap: break-word;"/>
可以通过httplib.responses 查询相关变量的含义，如：<br style="word-wrap: break-word;"/>
Print httplib.responses[httplib.NOT_FOUND] #not found<br style="word-wrap: break-word;"/>
更多关于httplib的信息，请参考<a href="http://www.google.cn/search?hl=zh-CN&amp;source=hp&amp;q=Python%E6%89%8B%E5%86%8C&amp;btnG=Google+%E6%90%9C%E7%B4%A2&amp;aq=f&amp;oq=" style="word-wrap: break-word; text-decoration: none; color: rgb(99, 64, 27);" target="_blank">Python手册</a>httplib 模块。<br style="word-wrap: break-word;"/><br style="word-wrap: break-word;"/>
urllib 和urllib2实现的功能大同小异，但urllib2要比urllib功能等各方面更高一个层次。目前的HTTP访问大部分都使用urllib2.<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">urllib2:</strong></p><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><span style="word-wrap: break-word;">req</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">urllib2.Request(</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">http://pythoneye.com</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">)<br style="word-wrap: break-word;"/>
response</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">urllib2.urlopen(req)<br style="word-wrap: break-word;"/>
the_page</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">response.read()<br style="word-wrap: break-word;"/></span></div><div style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px;"><span style="word-wrap: break-word; padding-right: 5px;"><a href="http://www.cnblogs.com/morya/archive/2011/05/12/2044904.html" style="word-wrap: break-word; text-decoration: none; color: rgb(99, 64, 27);" target="_blank">复制代码</a></span></div></div><p style="word-wrap: break-word; margin: 5px auto; padding: 5px 0px 0px; font-family: 宋体, Arial; background-color: rgb(255, 252, 243);"><strong style="word-wrap: break-word;">FTP同样：</strong></p><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><span style="word-wrap: break-word;">req </span><span style="word-wrap: break-word;">=</span><span style="word-wrap: break-word;"> urllib2.Request(</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">ftp://pythoneye.com</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">)<br style="word-wrap: break-word;"/></span></div></div><p style="word-wrap: break-word; margin: 5px auto; padding: 5px 0px 0px; font-family: 宋体, Arial; background-color: rgb(255, 252, 243);">urlopen返回的应答对象response有两个很有用的方法info()和geturl()<br style="word-wrap: break-word;"/>
geturl — 这个返回获取的真实的URL，这个很有用，因为urlopen(或者opener对象使用的)或许<br style="word-wrap: break-word;"/>
会有重定向。获取的URL或许跟请求URL不同。<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">Data数据</strong><br style="word-wrap: break-word;"/>
有时候你希望发送一些数据到URL<br style="word-wrap: break-word;"/><strong style="word-wrap: break-word;">post方式：</strong></p><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><span style="word-wrap: break-word;">values </span><span style="word-wrap: break-word;">=</span><span style="word-wrap: break-word;">{</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">body</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;"> : </span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">test short talk</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">,</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">via</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">:</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">xxxx</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">}<br style="word-wrap: break-word;"/>
data </span><span style="word-wrap: break-word;">=</span><span style="word-wrap: break-word;"> urllib.urlencode(values)<br style="word-wrap: break-word;"/>
req </span><span style="word-wrap: break-word;">=</span><span style="word-wrap: break-word;"> urllib2.Request(url, data)<br style="word-wrap: break-word;"/></span></div><div style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px;"><span style="word-wrap: break-word; padding-right: 5px;"><a href="http://www.cnblogs.com/morya/archive/2011/05/12/2044904.html" style="word-wrap: break-word; text-decoration: none; color: rgb(99, 64, 27);" target="_blank">复制代码</a></span></div></div><p style="word-wrap: break-word; margin: 5px auto; padding: 5px 0px 0px; font-family: 宋体, Arial; background-color: rgb(255, 252, 243);"><strong style="word-wrap: break-word;">get方式：</strong></p><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><span style="word-wrap: break-word;">data[</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">name</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">]</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">Somebody Here</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;"><br style="word-wrap: break-word;"/>
data[</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">location</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">]</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">Northampton</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;"><br style="word-wrap: break-word;"/>
data[</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">language</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">]</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">Python</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;"><br style="word-wrap: break-word;"/>
url_values</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">urllib.urlencode(data)<br style="word-wrap: break-word;"/>
url</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">http://pythoneye.com/example.cgi</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;"><br style="word-wrap: break-word;"/>
full_url</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">url</span> <span style="word-wrap: break-word;">+</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">?</span><span style="word-wrap: break-word;">'</span> <span style="word-wrap: break-word;">+</span> <span style="word-wrap: break-word;">url_values<br style="word-wrap: break-word;"/>
data</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">urllib2.open(full_url)<br style="word-wrap: break-word;"/></span></div><div style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px;"><span style="word-wrap: break-word; padding-right: 5px;"><a href="http://www.cnblogs.com/morya/archive/2011/05/12/2044904.html" style="word-wrap: break-word; text-decoration: none; color: rgb(99, 64, 27);" target="_blank">复制代码</a></span></div></div><p style="word-wrap: break-word; margin: 5px auto; padding: 5px 0px 0px; font-family: 宋体, Arial; background-color: rgb(255, 252, 243);"><strong style="word-wrap: break-word;">使用Basic HTTP Authentication:</strong></p><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><span style="word-wrap: break-word;">import</span> <span style="word-wrap: break-word;">urllib2<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">#</span> <span style="word-wrap: break-word;">Create an OpenerDirector with support for Basic HTTP Authentication...</span><span style="word-wrap: break-word;"><br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">auth_handler</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">urllib2.HTTPBasicAuthHandler()<br style="word-wrap: break-word;"/>
auth_handler.add_password(realm</span><span style="word-wrap: break-word;">=</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">PDQ Application</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">,<br style="word-wrap: break-word;"/>
                           uri</span><span style="word-wrap: break-word;">=</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">https://pythoneye.com/vecrty.py</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">,<br style="word-wrap: break-word;"/>
                           user</span><span style="word-wrap: break-word;">=</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">user</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">,<br style="word-wrap: break-word;"/>
                           passwd</span><span style="word-wrap: break-word;">=</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">pass</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">)<br style="word-wrap: break-word;"/>
opener</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">urllib2.build_opener(auth_handler)<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">#</span> <span style="word-wrap: break-word;">...and install it globally so it can be used with urlopen.</span><span style="word-wrap: break-word;"><br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">urllib2.install_opener(opener)<br style="word-wrap: break-word;"/>
urllib2.urlopen(</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">http://www. pythoneye.com/app.html</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">)<br style="word-wrap: break-word;"/></span></div><div style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px;"><span style="word-wrap: break-word; padding-right: 5px;"><a href="http://www.cnblogs.com/morya/archive/2011/05/12/2044904.html" style="word-wrap: break-word; text-decoration: none; color: rgb(99, 64, 27);" target="_blank">复制代码</a></span></div></div><p style="word-wrap: break-word; margin: 5px auto; padding: 5px 0px 0px; font-family: 宋体, Arial; background-color: rgb(255, 252, 243);"><strong style="word-wrap: break-word;">使用代理ProxyHandler：</strong></p><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><span style="word-wrap: break-word;">proxy_handler</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">urllib2.ProxyHandler({</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">http</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">:</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">http://www.example.com:3128/</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">})<br style="word-wrap: break-word;"/>
proxy_auth_handler</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">urllib2.HTTPBasicAuthHandler()<br style="word-wrap: break-word;"/>
proxy_auth_handler.add_password(</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">realm</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">,</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">host</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">,</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">username</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">,</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">password</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">)<br style="word-wrap: break-word;"/><br style="word-wrap: break-word;"/>
opener</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">build_opener(proxy_handler, proxy_auth_handler)<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">#</span> <span style="word-wrap: break-word;">This time, rather than install the OpenerDirector, we use it directly:</span><span style="word-wrap: break-word;"><br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">opener.open(</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">http://www.example.com/login.html</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">)<br style="word-wrap: break-word;"/><br style="word-wrap: break-word;"/>
URLError–HTTPError:<br style="word-wrap: break-word;"/><br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">from</span> <span style="word-wrap: break-word;">urllib2</span> <span style="word-wrap: break-word;">import</span> <span style="word-wrap: break-word;">Request, urlopen, URLError, HTTPError<br style="word-wrap: break-word;"/>
req</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">Request(someurl)<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">try</span><span style="word-wrap: break-word;">:<br style="word-wrap: break-word;"/>
      response</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">urlopen(req)<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">except</span> <span style="word-wrap: break-word;">HTTPError, e:<br style="word-wrap: break-word;"/>
     </span><span style="word-wrap: break-word;">print</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">Error code:</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">, e.code<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">except</span> <span style="word-wrap: break-word;">URLError, e:<br style="word-wrap: break-word;"/>
     </span><span style="word-wrap: break-word;">print</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">Reason:</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">, e.reason<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">else</span><span style="word-wrap: break-word;">:<br style="word-wrap: break-word;"/>
       .............<br style="word-wrap: break-word;"/><br style="word-wrap: break-word;"/></span></div><div style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px;"><span style="word-wrap: break-word; padding-right: 5px;"><a href="http://www.cnblogs.com/morya/archive/2011/05/12/2044904.html" style="word-wrap: break-word; text-decoration: none; color: rgb(99, 64, 27);" target="_blank">复制代码</a></span></div></div><p style="word-wrap: break-word; margin: 5px auto; padding: 5px 0px 0px; font-family: 宋体, Arial; background-color: rgb(255, 252, 243);">或者：</p><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><span style="word-wrap: break-word;">from</span> <span style="word-wrap: break-word;">urllib2</span> <span style="word-wrap: break-word;">import</span> <span style="word-wrap: break-word;">Request, urlopen, URLError<br style="word-wrap: break-word;"/>
req</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">Request(someurl)<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">try</span><span style="word-wrap: break-word;">:<br style="word-wrap: break-word;"/>
      response</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">urlopen(req)<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">except</span> <span style="word-wrap: break-word;">URLError, e:<br style="word-wrap: break-word;"/>
     </span><span style="word-wrap: break-word;">if</span> <span style="word-wrap: break-word;">hasattr(e,</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">reason</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">):<br style="word-wrap: break-word;"/>
           </span><span style="word-wrap: break-word;">print</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">Reason:</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">, e.reason<br style="word-wrap: break-word;"/>
     </span><span style="word-wrap: break-word;">elif</span> <span style="word-wrap: break-word;">hasattr(e,</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">code</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">):<br style="word-wrap: break-word;"/>
           </span><span style="word-wrap: break-word;">print</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">Error code:</span> <span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">, e.code<br style="word-wrap: break-word;"/>
     </span><span style="word-wrap: break-word;">else</span><span style="word-wrap: break-word;">:<br style="word-wrap: break-word;"/>
            .............<br style="word-wrap: break-word;"/></span></div><div style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px;"><span style="word-wrap: break-word; padding-right: 5px;"><a href="http://www.cnblogs.com/morya/archive/2011/05/12/2044904.html" style="word-wrap: break-word; text-decoration: none; color: rgb(99, 64, 27);" target="_blank">复制代码</a></span></div></div><p style="word-wrap: break-word; margin: 5px auto; padding: 5px 0px 0px; font-family: 宋体, Arial; background-color: rgb(255, 252, 243);">通常，URLError在没有网络连接(没有路由到特定服务器),或者服务器不存在的情况下产生<br style="word-wrap: break-word;"/>
异常同样会带有”reason”属性，它是一个tuple，包含了一个错误号和一个错误信息</p><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><span style="word-wrap: break-word;">req</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">urllib2.Request(</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">http://pythoneye.com</span><span style="word-wrap: break-word;">'</span><span style="word-wrap: break-word;">)<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">try</span><span style="word-wrap: break-word;">:<br style="word-wrap: break-word;"/>
    urllib2.urlopen(req)<br style="word-wrap: break-word;"/></span><span style="word-wrap: break-word;">except</span> <span style="word-wrap: break-word;">URLError, e:<br style="word-wrap: break-word;"/>
   </span><span style="word-wrap: break-word;">print</span> <span style="word-wrap: break-word;">e.reason<br style="word-wrap: break-word;"/>
   </span><span style="word-wrap: break-word;">print</span> <span style="word-wrap: break-word;">e.code<br style="word-wrap: break-word;"/>
   </span><span style="word-wrap: break-word;">print</span> <span style="word-wrap: break-word;">e.read()<br style="word-wrap: break-word;"/></span></div><div style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px;"><span style="word-wrap: break-word; padding-right: 5px;"><a href="http://www.cnblogs.com/morya/archive/2011/05/12/2044904.html" style="word-wrap: break-word; text-decoration: none; color: rgb(99, 64, 27);" target="_blank">复制代码</a></span></div></div><p style="word-wrap: break-word; margin: 5px auto; padding: 5px 0px 0px; font-family: 宋体, Arial; background-color: rgb(255, 252, 243);">最后需要注意的就是，当处理URLError和HTTPError的时候，应先处理HTTPError，后处理URLError<br style="word-wrap: break-word;"/>
Openers和Handlers：<br style="word-wrap: break-word;"/>
opener使用操作器（handlers）。所有的重活都交给这些handlers来做。每一个handler知道<br style="word-wrap: break-word;"/>
怎么打开url以一种独特的url协议（http，ftp等等），或者怎么处理打开url的某些方面，如，HTTP重定向，或者HTTP<br style="word-wrap: break-word;"/>
cookie。<br style="word-wrap: break-word;"/>
默认opener有对普通情况的操作器 （handlers）- ProxyHandler, UnknownHandler, HTTPHandler,<br style="word-wrap: break-word;"/>
HTTPDefaultErrorHandler, HTTPRedirectHandler, FTPHandler, FileHandler, HTTPErrorProcessor.<br style="word-wrap: break-word;"/>
再看python API：Return an OpenerDirector instance, which chains the handlers in the order given<br style="word-wrap: break-word;"/>
这就更加证明了一点，那就是opener可以看成是一个容器，这个容器当中放的是控制器，默认的，容器当中有五个控制<br style="word-wrap: break-word;"/>
器，程序员也可以加入自己的控制器，然后这些控制器去干活。</p><div style="word-wrap: break-word; margin: 5px 0px; padding: 5px; font-size: 12px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier new&quot;; word-break: break-all;"><div style="word-wrap: break-word; margin: 0px; padding: 0px;"><span style="word-wrap: break-word;">class</span> <span style="word-wrap: break-word;">HTTPHandler(AbstractHTTPHandler):<br style="word-wrap: break-word;"/>
    </span><span style="word-wrap: break-word;">def</span> <span style="word-wrap: break-word;">http_open(self, req):<br style="word-wrap: break-word;"/>
        </span><span style="word-wrap: break-word;">return</span> <span style="word-wrap: break-word;">self.do_open(httplib.HTTPConnection, req)<br style="word-wrap: break-word;"/>
     http_request</span> <span style="word-wrap: break-word;">=</span> <span style="word-wrap: break-word;">AbstractHTTPHandler.do_request_<br style="word-wrap: break-word;"/></span></div><div style="word-wrap: break-word; margin: 5px 0px 0px; padding: 0px;"><span style="word-wrap: break-word; padding-right: 5px;"><a href="http://www.cnblogs.com/morya/archive/2011/05/12/2044904.html" style="word-wrap: break-word; text-decoration: none; color: rgb(99, 64, 27);" target="_blank">复制代码</a></span></div></div><div style="word-wrap: break-word; margin: 5px auto; padding: 5px 0px 0px; font-family: 宋体, Arial; background-color: rgb(255, 252, 243);">HTTPHandler是Openers当中的默认控制器之一，看到这个代码，证实了urllib2是借助于httplib实现的，同时也证实了Openers和Handlers的关系。<br style="word-wrap: break-word;"/><br style="word-wrap: break-word;"/><div>http://www.idoxin.com/index.php/2016/06/20/urllib2-httplib-httpconnection/</div></div></div></div></div></div></div></span>
</div></body></html> 