<html>
<head>
  <title>第七天</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="852"/>
<h1>第七天</h1>

<div>
<span><div><a href="第七天_files/2_27_phone_work(修改版).py"><img src="第七天_files/5d650cbb2a73a083acfe222207b9ca29.png" alt="2_27_phone_work(修改版).py"></a><a href="第七天_files/2.py"><img src="第七天_files/78c5df16d9f5362747bdf0652edc30d6.png" alt="2.py"></a></div><div style="text-align: center"> <b><span style="color: rgb(235, 0, 115);"><span style="font-size: 48px;">手机销售系统程序和集合 全局变量，异常捕获知识点</span></span></b></div><div>1.#coding:utf-8</div><div>phone_info = [{'name':'vivoX9','money':2799,'count':1},{'name':'iphone7(32G)','money':4888,'count':31},{'name':'iphone7(128G)','money':5668,'count':22},{'name':'iphone7P(128G)','money':6616,'count':29}]</div><div><br/></div><div># 查看所有手机品牌</div><div>def selecte_all_phone(is_detail):</div><div>    # 遍历列表</div><div>    for x in range(len(phone_info)):</div><div>        ph_dict = phone_info[x]</div><div>        # 判断is_detail值为Ture，则输出产品名称、价钱、库存</div><div>        if is_detail == True:</div><div>            print '%d：%s %d %d '%(x+1,ph_dict['name'],ph_dict['money'],ph_dict['count'])</div><div>        else:</div><div>            print '%d：%s'%(x+1,ph_dict['name'])</div><div># 判断选择数字是否符合标准</div><div>def selecte_number(mix_num,max_num,a):</div><div>    selecte_number = input('请根据序号选择：')</div><div>    if a == True:</div><div>        while selecte_number != mix_num and selecte_number != max_num:</div><div>            selecte_number = input('请选择正确的选项：')</div><div>    else:</div><div>        while selecte_number &lt;mix_num or selecte_number &gt; max_num:</div><div>            selecte_number = input('请选择正确的选项：')</div><div>    # 返回最终的结果</div><div>    return selecte_number</div><div># ----------------------购买、查看函数-------------------</div><div># 详情或返回</div><div>def detail_back():</div><div>    print '666.选择产品序号查看详情\n888.返回'</div><div>    # 选择1，</div><div>    if selecte_number(666,888,True) == 666:</div><div>        # 输入序号，查看详情</div><div>        input_count()</div><div>    else:</div><div>        return</div><div># 输入序号，查看详情</div><div>def input_count():</div><div>    selecte_all_phone(False)</div><div>    phone_count = selecte_number(0,len(phone_info),False)</div><div>    # 根据序号取出手机详情字典</div><div>    phone_dict = phone_info[phone_count-1]</div><div><br/></div><div>    print '%d:名称:%s 价格:%d 库存:%d' % (phone_count,phone_dict['name'],phone_dict['money'],phone_dict['count'])</div><div>    # 执行购买或者返回函数，传入对应手机字典</div><div>    buy_back(phone_dict)</div><div># 购买或者返回</div><div>def buy_back(dict_p):</div><div>    print '1.购买\n2.返回'</div><div><br/></div><div>    if selecte_number(1,2,True) == 1:</div><div>        # 取出库存量</div><div>        count = dict_p['count']</div><div>        # 库存量-1</div><div>        dict_p['count'] = count -1</div><div><br/></div><div>        if  dict_p['count'] == 0:</div><div>            # 把字典从列表中移除</div><div>            phone_info.remove(dict_p)</div><div><br/></div><div>        print '购买支付成功！'</div><div><br/></div><div>    else:</div><div>        return</div><div># ----------------------修改、添加函数-------------------</div><div>def update_add():</div><div>    print '1.添加新产品\n2.修改原有产品'</div><div>    if selecte_number(1,2,True) == 1:</div><div>        add_phone()</div><div>    else:</div><div>        update_phone()</div><div># 添加新产品</div><div>def  add_phone():</div><div>    p_name = raw_input('请输入产品名称：')</div><div>    p_money = input('请输入产品价格：')</div><div>    p_count = input('请输入产品库存：')</div><div><br/></div><div>    # 判断产品库存是否小于等于0</div><div>    while p_count &lt;= 0:</div><div>        p_count = input('请输入正确的库存数：')</div><div><br/></div><div>    # 组装手机信息字典</div><div>    p_dict = {'name':p_name,'money':p_money,'count':p_count}</div><div><br/></div><div>    # 追加到所有手机信息列表中</div><div>    phone_info.append(p_dict)</div><div># 修改原有产品</div><div>def update_phone():</div><div>    # 查看所有手机库存详情</div><div>    selecte_all_phone(True)</div><div>    print '1.根据序号修改\n2.返回'</div><div><br/></div><div>    if selecte_number(1,2,True) == 1:</div><div>        up_num = input('请选择修改序号：')</div><div>        while up_num &lt;1 or up_num &gt; len(phone_info):</div><div>            up_num = input('请选择正确的序号：')</div><div><br/></div><div>        p_name = raw_input('请输入修改后的名称：')</div><div>        p_money = input('请输入修改后的价格：')</div><div>        p_count = input('请输入修改后的库存量：')</div><div>        while p_count &lt;=0:</div><div>            p_count = input('请输入争正确的库存量：')</div><div>        # 根据选择序号取出字典</div><div>        p_dict = phone_info[up_num-1]</div><div>        # 修改</div><div>        p_dict['name'] = p_name</div><div>        p_dict['money'] = p_money</div><div>        p_dict['count'] = p_count</div><div><br/></div><div>    else:</div><div>        return</div><div># ---------------------移除产品库存信息</div><div>def delete_phone():</div><div>    print '1.查看所有产品，根据序号移除\n2.移除所有产品\n3.返回'</div><div>    sele_num =selecte_number(1,3,False)</div><div><br/></div><div>    if sele_num == 1:</div><div>        selecte_all_phone(True)</div><div><br/></div><div>        ph_count = selecte_number(1,len(phone_info),False)</div><div><br/></div><div>        del phone_info[ph_count-1]</div><div><br/></div><div>    elif sele_num == 2:</div><div>        # 清空所有手机信息</div><div>        while len(phone_info):</div><div>            phone_info.pop()</div><div>    else:</div><div>        return</div><div>#  print 输出语句，可以在控制台打印输出文字信息</div><div># input 接收python表达式</div><div># raw_input 把输入的所有内容以字符串的方式接收</div><div># 输出多个内容时，可以用逗号隔开</div><div># \n 回车换行符</div><div># bool 布尔类型  True(1)  False(0)</div><div>while True:</div><div>    print '1.查看所有手机品牌\n2.更改产品库存信息\n3.移除产品库存信息\n4.退出程序'</div><div>    sele_num = selecte_number(1,4,False)</div><div>    # 判断选择的选项</div><div>    if sele_num == 1:</div><div>        selecte_all_phone(False)</div><div>        detail_back()</div><div><br/></div><div>    elif sele_num == 2:</div><div>        update_add()</div><div><br/></div><div>    elif sele_num == 3:</div><div><br/></div><div>        delete_phone()</div><div>    else:</div><div>        # 退出程序</div><div>        break</div><div><br/></div><div><br/></div><div><br/></div><div>2.#coding:utf-8</div><div># 集合(可以利用集合做除重操作，因为集合有互异性)</div><div># python中集合是无序，集合中不会出现相同的数据</div><div># 创建集合:set 后面的（）内传入可迭代的对象</div><div># 根据字符串创建集合，字符串会进行分割，每个字符都是一个单独的数据，并且不会相同的字符出现</div><div>set_1=set('hello')</div><div>print set_1</div><div># 执行结果:set(['h', 'e', 'l', 'o'])</div><div>#列表创建集合</div><div>set_2 = set([1,2,3,4,5,6])</div><div>print set_2</div><div>#执行结果：set([1, 2, 3, 4, 5, 6])</div><div>#元组创建集合</div><div>set_3=set((1,9,'hello',5,6,8))</div><div>print set_3</div><div>#执行结果：set([1, 5, 6, 8, 9, 'hello'])</div><div>#字典创建集合，只会字典中的key放在集合中</div><div>set_4=set({'name':'zhangsan','age':15,'sex':1})</div><div>print set_4</div><div>#执行结果set(['age', 'name', 'sex'])</div><div>#总结，新创建的集合形式为set([ 中间放的是集合中的元素])</div><div>#集合的添加：</div><div>#add添加:把要添加的数据看做是一个整体添加,add 做的只是添加的操作这个动作add不能添加列表</div><div>set_2.add((1,2,3))</div><div>print 'add后：',set_2</div><div># add后： set([1, 2, 3, 4, 5, 6, (1, 2, 3)])</div><div><br/></div><div>#update（更新）：把要添加的对象拆分进行添加加入</div><div>set_2.update([45,56,98])</div><div>print 'update后：',set_2</div><div># update后： set([1, 2, 3, 4, 5, 6, 45, (1, 2, 3), 56, 98])</div><div>#for循环遍历查询集合</div><div>for x in set_2:</div><div>    #输出所有集合的元素</div><div>    print x</div><div>#集合的交集，合集，补集</div><div>#交集:&amp;</div><div>res_set=set_2&amp;set_3#交集</div><div>print '交集',res_set</div><div># 交集 set([1, 5, 6])</div><div>#合集</div><div>res_set=set_2|set_3#合集</div><div>print res_set</div><div># set([1, 2, 3, 4, 5, 6, 8, 9, 45, (1, 2, 3), 56, 98, 'hello'])</div><div>#补集;-</div><div>res_set=set_2-set_3#补集</div><div># set3相对于set2的补集</div><div>print '---&gt;',res_set</div><div># set([2, 3, 4, 98, 45, (1, 2, 3), 56])</div><div>#全局变量，在整个文件中的任意函数内都可以使用</div><div># 在函数内使用、修改全局变量的值,必须先声明</div><div>    #global name</div><div>name = 'zhangsan'</div><div>def test(nick_name):</div><div>    # 函数内声明的变量，局部变量，作用域范围是从声明的位置开始，直到函数结束</div><div>    # 函数中的name是一个局部变量</div><div>    # name = nick_name</div><div>    global name</div><div>    # 声明该变量是一个全局的变量</div><div>    name=nick_name</div><div>    print '函数内的name：',name</div><div>test ('lisi')</div><div>print '函数外的name：',name</div><div>def test_2(string):</div><div>    global name</div><div>    name = string</div><div><br/></div><div>test_2('wangwu')</div><div><br/></div><div>print '测试2:',name</div><div>#异常捕获</div><div># 异常:也是一个事件，如果执行程序时，出现无法继续执行下去的情况，发生了一个异常事件，程序不会再继续执行下方的代码</div><div>list_1 = [1,2,3]</div><div>#try except 捕获异常  基本格式</div><div>#捕获所有的异常</div><div>try:</div><div>    list_1[4]</div><div>except :</div><div>    print '你的程序出错了'</div><div>    # try:</div><div>    #     pass</div><div>    # except Exception, e:</div><div>    #     raise e</div><div>    # else:</div><div>    #     pass</div><div># Exception :指明要检测的异常错误</div><div># e：异常错误信息</div><div> #     raise e 是触发异常信息</div><div> # 当try中代码没有异常时，执行else后的代码</div><div>try:</div><div>    list_1[1]</div><div>except IndexError, e:</div><div>    print e</div><div>else:</div><div>    print '这是else后的代码'</div><div><br/></div><div># Exception参数可以填写多，检测多种异常信息,用()括起来，每个异常之间用逗号隔开,如果异常没在检测的异常范围内，它会自己触发异常</div><div>try:</div><div>    list_1.zhangsan()</div><div>except (IndexError,ValueError,AttributeError), e:</div><div>    # 自己处理异常的代码</div><div>    print '异常错误原因：',e</div><div>else:</div><div>    pass</div><div><br/></div><div># 无论是否发生异常都会执行finally后的代码，执行完finally后的代码，再触发异常</div><div>try:</div><div>    list_1[1]</div><div>finally:</div><div>    print '这是finally后的代码'</div><div><br/></div><div>print '这是捕获异常之后的代码'</div><div># 自己触发异常信息</div><div># raise+ 异常错误的类别+('异常错误原因',跟踪错误的对象)</div><div>def calc_test(x):</div><div>    if x == 0:</div><div>        raise Exception('x is not 0!')</div><div><br/></div><div>    print 10/x</div><div><br/></div><div>calc_test(0)</div><div><br/></div></span>
</div></body></html> 