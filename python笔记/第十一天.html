<html>
<head>
  <title>第十一天</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="830"/>
<h1>第十一天</h1>

<div>
<span><div><a href="第十一天_files/1.py"><img src="第十一天_files/c62cb11bca8873dcc4df9f94154aeb24.png" alt="1.py"></a><a href="第十一天_files/like_demo.py"><img src="第十一天_files/7dccef3253d1b099733a9989d2634cfb.png" alt="like_demo.py"></a><br/></div><div style="text-align: center"><b><span style="color: rgb(255, 0, 0);"><span style="font-size: 48px;">sqlite3数据库的知识点</span></span></b></div><div style="text-align: center">#coding:utf-8</div><div style="text-align: center">#使用sqlite3，需要先引入该包</div><div style="text-align: center">import sqlite3</div><div style="text-align: center">#connect()连接到某个数据库文件， .db：数据库文件后缀</div><div style="text-align: center"># 如果连接的数据库文件不存在，则在当前目录创建该文件</div><div style="text-align: center"># 接收数据库连接对象</div><div style="text-align: center">conn = sqlite3.connect('database.db')</div><div style="text-align: center"># 创建操作数据库文件的游标</div><div style="text-align: center"> conn.cursor()</div><div style="text-align: center"> # 接收数据库文件的游标</div><div style="text-align: center"> cursor = conn.cursor()</div><div style="text-align: center"> # 准备sql语句</div><div style="text-align: center"> # primary key 设置主键 非空 唯一 如果主键是integer类型，那么主键是自增的</div><div style="text-align: center"> # integer 整数 float浮点  boolen布尔 text字符串</div><div style="text-align: center"> # 创建表的sql语句</div><div style="text-align: center"> # sql=&quot;create table Student(id inteder primary key,name text,age integer&quot;</div><div style="text-align: center"> # 删除表的sql语句</div><div style="text-align: center"> # sql=&quot;drop table  Student&quot;</div><div style="text-align: center"> # 插入数据的sql语句</div><div style="text-align: center"> # sql=&quot;insert into Student(id,name,age) values(1,'zhangsan',22)&quot;</div><div style="text-align: center"> # 准备执行sql语句</div><div style="text-align: center"> cursor.execute(sql)</div><div style="text-align: center"> # 关闭cursor游标</div><div style="text-align: center"> cursor.close()</div><div style="text-align: center"> # 提交操作</div><div style="text-align: center"> conn.commit()</div><div style="text-align: center"> # 关闭数据库连接</div><div style="text-align: center"> conn.close()</div><div style="text-align: center"><br/></div><div style="text-align: center"># 删除的sql语句</div><div style="text-align: center">    # and 多个条件成立  or一个条件成立即可</div><div style="text-align: center">    sql = 'delete from Student where id&gt;2 and id&lt;6'</div><div style="text-align: center">sql = &quot;update Student set name='%s',age = %d where id = 2&quot;%(name,age)</div><div style="text-align: center"><br/></div><div style="text-align: center"><br/></div><div style="text-align: center"><br/></div><div style="text-align: center"># sql = 'insert into Student (name,age) values (?,?)'</div><div style="text-align: center"># 准备执行sql语句</div><div style="text-align: center"># unicode 对中文字符进行编码 (unicode(name,'utf-8')</div><div style="text-align: center"># cursor.execute(sql,(unicode(name,'utf-8'),age))</div><div style="text-align: center"><br/></div><div style="text-align: center"># 准备sql语句</div><div style="text-align: center"># 拼接好sql语句</div><div style="text-align: center">#</div><div style="text-align: center"> a=sql = 'select * from Student'</div><div style="text-align: center">   # 查询时，会返回 一个cursor对象，该对象中放的就是查询的结果# 类似于容器类。存放 结果(以元组的形式存放的)</div><div style="text-align: center">for遍历查询所有数据</div><div style="text-align: center">for x in a:</div><div style="text-align: center">    print x</div><div style="text-align: center"># 直接取出元组中的数据</div><div style="text-align: center">for id,name,age in a:</div><div style="text-align: center">    print id,name,age</div><div style="text-align: center"># 张% 匹配以张字符开头的数据</div><div style="text-align: center">    # %丰 匹配以丰字结尾的数据</div><div style="text-align: center">    # %三% 匹配包含三字符的数据</div><div style="text-align: center">    # 张_ 匹配以张开头并且匹配张后的一个字符</div><div style="text-align: center">    # __丰 匹配以丰字符结束，并且匹配丰前2个字符的数据</div><div style="text-align: center">conn.execute() = conn.cursor().execute()</div><div style="text-align: center">#execute()函数本身已经创建了游标，不用再写创建游标的函数</div><div style="text-align: center"># 为了不写关闭的数据库的操作</div><div style="text-align: center">        # 使用该语法可以自动关闭数据库，同时也关闭了游标</div><div style="text-align: center">with self.connect() as conn:</div><div style="text-align: center">    # conn.execute(sql) 执行一条sql语句</div><div style="text-align: center"> #conn.executescript() 执行多条sql语句,用分号;隔开每个sql语句</div><div style="text-align: center">conn.executescript(sql_1+';'+sql_2)</div><div style="text-align: center"><br/></div><div style="text-align: center"><br/></div><div style="text-align: center"><br/></div><div style="text-align: center">#coding:utf-8</div><div style="text-align: center"><br/></div><div style="text-align: center">import sqlite3</div><div style="text-align: center"><br/></div><div style="text-align: center">def select_like():</div><div style="text-align: center">    conn  = sqlite3.connect('database.db')</div><div style="text-align: center">    # 张% 匹配以张字符开头的数据</div><div style="text-align: center">    # %丰 匹配以丰字结尾的数据</div><div style="text-align: center">    # %三% 匹配包含三字符的数据</div><div style="text-align: center">    # 张_ 匹配以张开头并且匹配张后的一个字符</div><div style="text-align: center">    # __丰 匹配以丰字符结束，并且匹配丰前2个字符的数据</div><div style="text-align: center">    sql = &quot;select count (*) from Student&quot;</div><div style="text-align: center"><br/></div><div style="text-align: center">    res = conn.cursor().execute(sql)</div><div style="text-align: center"><br/></div><div style="text-align: center">    # 取出结果中的数字</div><div style="text-align: center">    # 查询结果集中的下一条数据</div><div style="text-align: center">    print  res.next()[0]</div><div style="text-align: center"><br/></div><div style="text-align: center">    # for stu_id,stu_name,stu_age,stu_grade in res:</div><div style="text-align: center"><br/></div><div style="text-align: center">    #     print stu_id,stu_name,stu_age,stu_grade</div><div style="text-align: center"><br/></div><div style="text-align: center">    conn.cursor().close()</div><div style="text-align: center">    conn.close()</div><div style="text-align: center"><br/></div><div style="text-align: center">select_like()</div><div style="text-align: center"><br/></div><div style="text-align: center"><br/></div><div style="text-align: center">1.创建新表</div><div style="text-align: center">create table tabname(col1 type1 [not null] [primary key],col2 type2 [not null],..)</div><div style="text-align: center"><br/></div><div style="text-align: center">2.删除表</div><div style="text-align: center">drop table tabname</div><div style="text-align: center"><br/></div><div style="text-align: center">3.查询：select * from table1 where 范围</div><div style="text-align: center"><br/></div><div style="text-align: center">4.插入：insert into table1(field1,field2) values(value1,value2)</div><div style="text-align: center"><br/></div><div style="text-align: center">5.删除：delete from table1 where 范围</div><div style="text-align: center"><br/></div><div style="text-align: center">6.修改：update table1 set field1=value1 where 范围</div><div style="text-align: center"><br/></div><div style="text-align: center">7.查找：select * from table1 where field1 like ’%value1%’ N%匹配以N开头     %N匹配以N结尾   %N%匹配包含N </div><div style="text-align: center">    [a,b]% 以a或b开头     %[a,b]以a或b结尾</div><div style="text-align: center"><br/></div><div style="text-align: center">    select * from table1 where field1 like 'z_'以z开头且匹配之后一个字符</div><div style="text-align: center"><br/></div><div style="text-align: center">    升序输出数据记录</div><div style="text-align: center">    select * from table_name order by field asc</div><div style="text-align: center">    降序输出数据记录</div><div style="text-align: center">    select * from table_name order by field desc</div><div style="text-align: center"><br/></div><div style="text-align: center">9.总数：select count (*) from table_name;</div><div style="text-align: center"><br/></div></span>
</div></body></html> 