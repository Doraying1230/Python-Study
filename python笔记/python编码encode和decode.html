<html>
<head>
  <title>python编码encode和decode</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="812"/>
<h1>python编码encode和decode</h1>

<div>
<span><div><h1 style="margin: 0px 0px 10px; padding: 0px 0px 0px 5px; font-size: 15.6px; font-weight: bold; border: 0px; float: left; width: 972.938px; clear: both; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><a href="http://www.cnblogs.com/Xjng/p/3809781.html" style="margin: 0px; padding: 0px; outline: none; color: rgb(33, 117, 155); text-decoration: none; transition: all 0.4s linear 0s;">python编码encode和decode</a></h1><div style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-size: 14px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><div style="margin: 0px 0px 20px; padding: 0px; word-break: break-word;"><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">计算机里面，编码方法有很多种，英文的一般用ascii,而中文有unicode，utf-8,gbk,utf-16等等。</p><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">unicode是 utf-8,gbk,utf-16这些的父编码，这些子编码都能转换成unicode编码，然后转化成子编码，例如utf8可以转成unicode，再转gbk，但不能直接从utf8转gbk</p><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">所以，python中就有两个方法用来解码（decode）与编码（encode），解码是子编码转unicode，编码就是unicode转子编码</p><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">1.编码</p><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">#</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">encoding=utf-8</span>
c=u<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">\u5f00\u59cb\u6267\u884c\u66f4\u65b0\u547d\u4ee4</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span>
print c<br style="margin: 0px; padding: 0px;"/><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">print</span> c.encode(<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">utf8</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">)
</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">print</span> c.encode(<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">gbk</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span>)
</pre></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">在这里，文件的编码方式为utf8,控制台的编码方式是utf8<br style="margin: 0px; padding: 0px;"/>
变量c是一个unicode编码的字符串（需要在引号前面加u）</p><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">输出的结果为：</p><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">开始执行更新命令
开始执行更新命令
��ʼִ�и�������</span></pre></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">因为控制台是utf8编码，所以unicode编码和utf8编码都能识别，但是gbk就不可以了<br style="margin: 0px; padding: 0px;"/>
2.解码</p><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">#</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">encoding=utf-8</span>
a = <span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">中文</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">print a.decode(<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">g<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">')</span></span></span></span><br style="margin: 0px; padding: 0px;"/><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">print</span> [a.decode(<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">g</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span>)]
</pre></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">这里a为utf8编码，decode方法将utf8解码为unicode编码<br style="margin: 0px; padding: 0px;"/>
输出结果：</p><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">中文
[u</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">\u4e2d\u6587</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span>]
</pre></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">由于控制台能识别unicode编码，所以需要把字符串放在列表里面才能看到unicode源码</p><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">#</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">encoding=utf-8</span>
a = <span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">中文</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">print</span> [a.decode(<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">gbk</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span>)]
</pre></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">因为a是utf8编码的，如果将a用gbk解码，程序就会报错</p><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">
UnicodeDecodeError: <span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">gbk</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span> codec can<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">t decode bytes in position 2-3: illegal multibyte sequence</span></pre></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px;"> </p><p style="margin: 10px auto; padding: 0px; text-indent: 0px;"> </p><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">
a = <span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">中文</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">print</span> a.decode(<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">utf-16</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span>)
</pre></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">如果用utf-16解码方法解码utf-8的字符串，程序并不会报错（可能因为它们的编码方式相似），但是返回的是乱码：</p><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">
룤螖
</pre></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px;"> </p><p style="margin: 10px auto; padding: 0px; text-indent: 0px;"> </p><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">如果一个字符串为unicode码，又没有u标识，可以这样来转换成中文</p><div style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">
a=<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">\u8054\u76df\u533a</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">
b</span>=<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">&quot;</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">u'%s'</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(128, 0, 0);">&quot;</span>%<span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">a

</span><span style="margin: 0px; padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">print</span> eval(b)
</pre></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px;"> </p><p style="margin: 10px auto; padding: 0px; text-indent: 0px;"> </p><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">后记</p><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">1.如果想知道一个字符串是什么编码，可以print [字符串] 来看二进制码 </p><p style="margin: 10px auto; padding: 0px; text-indent: 0px;">[u'\u76ee\u6807\u533a\u670d']<br style="margin: 0px; padding: 0px;"/>
['\xe7\x9b\xae\xe6\xa0\x87\xe5\x8c\xba\xe6\x9c\x8d']</p><div style="margin: 10px auto; padding: 0px; text-indent: 0px;"><div>第一个是unicode，第二个是utf-8</div></div></div></div></div></span>
</div></body></html> 